<section class="related">
	<div class="container-fluid">
		<div class="row my-5" style="font-size: 1.3em;">
			<div class="col">
				<div class="next-post">
					{{ if .NextInSection }}
					<a class="link-reverse" href="{{ .NextPage.Permalink }}?ref=footer"><span style="color: #000; border: none;">Previous project</span><br>« {{ .NextPage.Title | truncate 50 "..." }}</a>
					{{ end }}
				</div>
			</div>

			<div class="col text-center">
				<button id="toggle"><span>All projects</span></button>
			</div>

			<div class="col text-right">
				<div class="previous-post">
					{{ if .PrevInSection }}
					<a class="link-reverse" href="{{ .PrevPage.Permalink }}?ref=footer"><span style="color: #000; border: none;">Next project</span><br>{{ .PrevPage.Title | truncate 50 "..."}} »</a>
					{{ end }}
				</div>
			</div>
		</div> <!-- /row -->
	</div> <!-- /container -->

	<div class="container-fluid" id="related_all">
		<div class="row my-5">
			{{ $mainpage := .Site.GetPage "section" "work" }}
			{{ range ($mainpage.Pages.GroupByParam "related") }}
			{{ if eq .Key true }}
			{{ range .Pages }}
			<div class="col-6 col-sm-4 col-md-3 col-xl-2">
				<div class="card mb-4">
					<div class="card-body">
						<a href="{{.Permalink}}" class="stretched-link">{{.Title | truncate 16 " (…)" }}</a>
					</div>
					<div class="card-img" style="background-image: url('{{"/img/work/" | absURL }}{{ .Param "thumbnail" }}');" alt="{{ .Title}} | {{ .Site.Title}} Studio" class="rounded mb-3">&nbsp;</div>
				</div>
			</div> <!-- /col -->
			{{ end }}
			{{ end }}
			{{ end }}
		</div> <!-- /row -->
	</div> <!-- /container -->
</section>

<script type="text/javascript">
	let button = document.getElementById('toggle');
	button.addEventListener('click', () => {
		document.getElementById('related_all').classList.toggle('active');
		document.getElementById('toggle').classList.toggle('active');
	});
</script>